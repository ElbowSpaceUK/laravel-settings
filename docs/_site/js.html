<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <meta name="google-site-verification" content="4SG_2KfCa2XVgO0fu6cjWwpp63M1in1SLQUBAXW0d3I" /> <title>JavaScript - Laravel Settings</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-8FNXG696PB"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-8FNXG696PB', { 'anonymize_ip': true }); </script> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>JavaScript | Laravel Settings</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="JavaScript" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="JavaScript" /> <meta property="og:description" content="JavaScript" /> <meta property="og:site_name" content="Laravel Settings" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="JavaScript" /> <script type="application/ld+json"> {"description":"JavaScript","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/images/logo.png"}},"@type":"WebPage","url":"/js","headline":"JavaScript","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/index" class="nav-list-link">Introduction</a></li><li class="nav-list-item"><a href="/basic-usage" class="nav-list-link">Basic Usage</a></li><li class="nav-list-item"><a href="/class-based" class="nav-list-link">Class-based Settings</a></li><li class="nav-list-item active"><a href="/js" class="nav-list-link active">JavaScript</a></li><li class="nav-list-item"><a href="/settings-ui" class="nav-list-link">Settings UI</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/advanced/advanced" class="nav-list-link">Advanced</a><ul class="nav-list "><li class="nav-list-item "><a href="/advanced/setting-types" class="nav-list-link">Setting Types</a></li></ul></li></ul> </nav> <footer class="site-footer"> <p> <button type="button" class="btn btn-sm btn-block btn-purple js-toggle-dark-mode">Come to the dark side</button> </p> <p> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </p> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Laravel Settings" aria-label="Search Laravel Settings" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/ElbowSpaceUK/laravel-settings" class="site-button" > Laravel Settings on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="javascript"> <a href="#javascript" class="anchor-heading" aria-labelledby="javascript"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> JavaScript </h1> <details open=""> <summary class="text-delta"> Table of contents </summary> <ol id="markdown-toc"> <li><a href="#vue" id="markdown-toc-vue">Vue</a> <ol> <li><a href="#setup" id="markdown-toc-setup">Setup</a></li> <li><a href="#getting" id="markdown-toc-getting">Getting</a></li> <li><a href="#setting" id="markdown-toc-setting">Setting</a></li> <li><a href="#loading" id="markdown-toc-loading">Loading</a> <ol> <li><a href="#loading-through-js" id="markdown-toc-loading-through-js">Loading through JS</a></li> <li><a href="#eager-loading" id="markdown-toc-eager-loading">Eager Loading</a></li> </ol> </li> </ol> </li> </ol> </details><hr /> <p>Settings can easily be retrieved in blade templates as normal. If you’re using a frontend framework like Vue, you can pass through settings to your root Vue component from your blade template.</p> <p>If you use Vue, we’ve put together a package to make this easier. This allows you to get and set any setting from any Vue component without having to pass it through from parent components.</p> <p>We currently only support Vue, but let us know if you’re interested in using this package with a different framework.</p> <h2 id="vue"> <a href="#vue" class="anchor-heading" aria-labelledby="vue"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Vue </h2> <h3 id="setup"> <a href="#setup" class="anchor-heading" aria-labelledby="setup"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setup </h3> <p>First you’ll need to install the package using npm or yarn.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">--save</span> @elbowspaceuk/laravel-settings-vue
</code></pre></div></div> <p>In your <code class="language-plaintext highlighter-rouge">app.js</code> file, where you create your Vue instance, add the following to initialise the plugin.</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// app.js</span>
<span class="k">import</span> <span class="nx">Settings</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@elbowspaceuk/laravel-settings-vue</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">Settings</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">axios</span><span class="p">:</span> <span class="nx">axios</span>
<span class="p">});</span>
</code></pre></div></div> <p>Note you must pass an axios instance to the Settings plugin. This must be ready to make api calls - if you are using the standard Laravel template this is set up for you and bound to <code class="language-plaintext highlighter-rouge">window.axios</code>, so the above snippet will work.</p> <p>You should also add the <code class="language-plaintext highlighter-rouge">\Settings\Http\Middleware\ShareSettingsWithJs</code> middleware to your <code class="language-plaintext highlighter-rouge">web</code> group in <code class="language-plaintext highlighter-rouge">app/Http/Kernel.php</code>, and add <code class="language-plaintext highlighter-rouge">@settings</code> to the head of your base blade template.</p><pre><code class="language-blade">// layout.blade.php
&lt;head&gt;
    &lt;title&gt;...&lt;/title&gt;
    @settings
&lt;/head&gt;
</code></pre><h3 id="getting"> <a href="#getting" class="anchor-heading" aria-labelledby="getting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Getting </h3> <p>From any Vue component, in the template or a method/computed property/watcher, you have access to a <code class="language-plaintext highlighter-rouge">$setting</code> property and a <code class="language-plaintext highlighter-rouge">$settings</code> property.</p> <p>The <code class="language-plaintext highlighter-rouge">$setting</code> property contains a key-value pair object with all the available settings and their values. This is reactive, so you can use it anywhere in your component.</p> <p>The <code class="language-plaintext highlighter-rouge">$settings</code> property contains a set of functions to help you work with settings in js.</p> <div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span>Your theme is { { $setting.theme } }<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div&gt;</span>THrough a computed property it's the same: <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
    <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
        <span class="na">computed</span><span class="p">:</span> <span class="p">{</span>
            <span class="nx">currentTheme</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$setting</span><span class="p">.</span><span class="nx">theme</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div> <h3 id="setting"> <a href="#setting" class="anchor-heading" aria-labelledby="setting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting </h3> <p>To set a setting value you should call <code class="language-plaintext highlighter-rouge">this.$settings.setValue('site_name', 'My new site name')</code> in your Vue component. You can set multiple at a time by passing through an object of key-value pairs of settings to <code class="language-plaintext highlighter-rouge">this.$settings.setValues()</code>.</p> <h3 id="loading"> <a href="#loading" class="anchor-heading" aria-labelledby="loading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Loading </h3> <p>In order to make your settings available to the frontend, you need to tell laravel settings you want to make use of the setting. This prevents us loading every setting every time which could be slow. There are two ways to share your settings with your Vue component. You can either do it from your component directly, or eager load them by specifying which settings to load in your Laravel app.</p> <h4 id="loading-through-js"> <a href="#loading-through-js" class="anchor-heading" aria-labelledby="loading-through-js"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Loading through JS </h4> <p>Before you can make use of a setting, call <code class="language-plaintext highlighter-rouge">this.$settings.loadSetting('theme')</code> and pass it the setting key or alias to load. This will be loaded in the background. During loading <code class="language-plaintext highlighter-rouge">this.$setting.theme</code> will be undefined, but once the setting is ready it will reactively update to the value.</p> <p>You can load many settings at the same time with <code class="language-plaintext highlighter-rouge">this.$settings.loadSettings(['theme', 'site_name'])</code>.</p> <h4 id="eager-loading"> <a href="#eager-loading" class="anchor-heading" aria-labelledby="eager-loading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Eager Loading </h4> <p>To avoid the overhead of loading settings from your javascript, you should try and mark settings to share in your laravel app. Any settings loaded this way will be instantly available without having to load them with <code class="language-plaintext highlighter-rouge">loadSettings()</code></p> <p>For settings that should be loaded on every request, such as a site name, you can put them into the config</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span>
    <span class="mf">...</span><span class="p">,</span>
    <span class="s1">'js'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'autoload'</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">'site_name'</span>
        <span class="p">]</span>
    <span class="p">]</span>
<span class="p">]</span>
</code></pre></div></div> <p>For settings that should only be loaded on some requests, add this to your controller or middleware.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">\</span><span class="nc">Settings\Share\LoadedSettings</span><span class="o">::</span><span class="nf">eagerLoad</span><span class="p">(</span><span class="s1">'site_name'</span><span class="p">);</span>
</code></pre></div></div> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0"> Copyright &copy; 2020 Toby Twigger. Distributed by an <a href=\"https://github.com/ElbowSpaceUK/laravel-translate/blob/develop/LICENCE.md\">MIT license.</a> </p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/ElbowSpaceUK/laravel-settings/edit/develop/_docs/js.md" id="edit-this-page">Edit this page on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script> const toggleDarkMode = document.querySelector('.js-toggle-dark-mode'); jtd.addEvent(toggleDarkMode, 'click', function(){ if (jtd.getTheme() === 'dark') { jtd.setTheme('light'); setCookie('theme', 'light', 365); toggleDarkMode.textContent = 'Come to the dark side'; } else { jtd.setTheme('dark'); setCookie('theme', 'dark', 365); toggleDarkMode.textContent = 'Return to the light side'; } }); jtd.onReady(function() { if(getCookie('theme') === 'dark') { jtd.setTheme('dark'); toggleDarkMode.textContent = 'Return to the light side'; } else { jtd.setTheme('light'); toggleDarkMode.textContent = 'Come to the dark side'; } }); function setCookie(cname, cvalue, exdays) { let d = new Date(); d.setTime(d.getTime() + (exdays*24*60*60*1000)); let expires = "expires="+ d.toUTCString(); document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/"; } function getCookie(cname) { let name = cname + "="; let decodedCookie = decodeURIComponent(document.cookie); let ca = decodedCookie.split(';'); for(let i = 0; i <ca.length; i++) { let c = ca[i]; while (c.charAt(0) == ' ') { c = c.substring(1); } if (c.indexOf(name) == 0) { return c.substring(name.length, c.length); } } return ""; } </script> </body> </html>
