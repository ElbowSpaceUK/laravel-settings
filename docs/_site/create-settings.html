<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <meta name="google-site-verification" content="4SG_2KfCa2XVgO0fu6cjWwpp63M1in1SLQUBAXW0d3I" /> <title>Creating Settings - Laravel Settings</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-8FNXG696PB"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-8FNXG696PB', { 'anonymize_ip': true }); </script> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Creating Settings | Laravel Settings</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Creating Settings" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Creating a Setting" /> <meta property="og:description" content="Creating a Setting" /> <meta property="og:site_name" content="Laravel Settings" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Creating Settings" /> <script type="application/ld+json"> {"description":"Creating a Setting","@type":"WebPage","url":"/create-settings","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/images/logo.png"}},"headline":"Creating Settings","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/index" class="nav-list-link">Introduction</a></li><li class="nav-list-item active"><a href="/create-settings" class="nav-list-link active">Creating Settings</a></li><li class="nav-list-item"><a href="/setting-types" class="nav-list-link">Setting Types</a></li><li class="nav-list-item"><a href="/get-settings" class="nav-list-link">Get Settings</a></li><li class="nav-list-item"><a href="/setting-forms" class="nav-list-link">Setting Forms</a></li><li class="nav-list-item"><a href="/set-settings" class="nav-list-link">Set Settings</a></li><li class="nav-list-item"><a href="/integrating" class="nav-list-link">Integrate</a></li><li class="nav-list-item"><a href="/js" class="nav-list-link">JS</a></li></ul> </nav> <footer class="site-footer"> <p> <button type="button" class="btn btn-sm btn-block btn-purple js-toggle-dark-mode">Come to the dark side</button> </p> <p> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </p> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Laravel Settings" aria-label="Search Laravel Settings" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/tobytwigger/laravel-settings" class="site-button" > Laravel Settings on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 id="creating-a-setting"> <a href="#creating-a-setting" class="anchor-heading" aria-labelledby="creating-a-setting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a Setting </h1> <details open="" class="no_toc"> <summary class="text-delta"> Table of contents </summary> <ol id="markdown-toc"> <li><a href="#creating-a-setting" id="markdown-toc-creating-a-setting">Creating a Setting</a> <ol> <li><a href="#create-a-new-setting" id="markdown-toc-create-a-new-setting">Create a new setting</a> <ol> <li><a href="#anonymous-settings" id="markdown-toc-anonymous-settings">Anonymous settings</a></li> <li><a href="#class-based-settings" id="markdown-toc-class-based-settings">Class-based settings</a></li> <li><a href="#customising-your-setting" id="markdown-toc-customising-your-setting">Customising your setting</a> <ol> <li><a href="#form-field" id="markdown-toc-form-field">Form Field</a></li> <li><a href="#validation" id="markdown-toc-validation">Validation</a></li> <li><a href="#groups" id="markdown-toc-groups">Groups</a></li> <li><a href="#encryption" id="markdown-toc-encryption">Encryption</a></li> <li><a href="#complex-data-types" id="markdown-toc-complex-data-types">Complex data types</a></li> </ol> </li> </ol> </li> <li><a href="#registering" id="markdown-toc-registering">Registering</a></li> </ol> </li> </ol> </details><hr /> <h2 id="create-a-new-setting"> <a href="#create-a-new-setting" class="anchor-heading" aria-labelledby="create-a-new-setting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create a new setting </h2> <p>Any setting must have at least the following information:</p> <ul> <li>A type (user, global or another custom type)</li> <li>A key</li> <li>A default value</li> <li>The form field for the setting (using the <a href="https://tobytwigger.github.io/form-schema-generator/">form schema generator</a>)</li> </ul> <p>For smaller apps, you can use simple anonymous settings to get going quickly. These require less boilerplate code to get running, but it’s up to you to keep track of the keys and make sure you don’t re-use any.</p> <p>For larger apps, or as your app grows, you can migrate over to using class-based settings. These give you more control over your settings and their appearance and use, whilst also leveraging your IDE to give you typehinting for available settings and make setting name clashes impossible.</p> <h3 id="anonymous-settings"> <a href="#anonymous-settings" class="anchor-heading" aria-labelledby="anonymous-settings"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Anonymous settings </h3> <p>To create a new anonymous setting, you can define it in the <code class="language-plaintext highlighter-rouge">boot</code> method of your service provider.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">function</span> <span class="n">boot</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="err">\</span><span class="nc">Settings\Setting</span><span class="o">::</span><span class="nf">createGlobal</span><span class="p">(</span>
            <span class="s1">'siteName'</span><span class="p">,</span> <span class="c1">// The key</span>
            <span class="s1">'My App'</span><span class="p">,</span> <span class="c1">// The default value</span>
            <span class="err">\</span><span class="nc">FormSchema\Generator\Field</span><span class="o">::</span><span class="nf">textInput</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nb">key</span><span class="p">())</span><span class="o">-&gt;</span><span class="nf">setValue</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">defaultValue</span><span class="p">()),</span> <span class="c1">// The form field</span>
            <span class="p">[</span><span class="s1">'branding'</span><span class="p">,</span> <span class="s1">'appearance'</span><span class="p">],</span> <span class="c1">// The groups the setting is in</span>
            <span class="p">[</span><span class="s1">'string'</span><span class="p">],</span> <span class="c1">// The laravel validation rules</span>
       <span class="p">)</span>
    <span class="p">}</span>
</code></pre></div></div> <p>You can use <code class="language-plaintext highlighter-rouge">createGlobal</code> or <code class="language-plaintext highlighter-rouge">createUser</code> by default, and if you add a custom type you can reference it with <code class="language-plaintext highlighter-rouge">\Settings\Setting::create('custom-type', 'siteName', ...)</code>.</p> <h3 id="class-based-settings"> <a href="#class-based-settings" class="anchor-heading" aria-labelledby="class-based-settings"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Class-based settings </h3> <p>A class-based setting has generally the same information, but defines functions to return them rather than setting them in arguments.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="kn">use</span> <span class="nc">Settings\Schema\Setting</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">SiteName</span> <span class="kd">extends</span> <span class="nc">Setting</span>
<span class="p">{</span>

    <span class="cd">/**
     * The default value of the setting.
     *
     * @return mixed
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">defaultValue</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">'My Site'</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cd">/**
     * The field schema to show the user when editing the value.
     *
     * @throws \Exception
     * @return Field
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">fieldOptions</span><span class="p">():</span> <span class="err">\</span><span class="nc">FormSchema\Schema\Field</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="err">\</span><span class="nc">FormSchema\Generator\Field</span><span class="o">::</span><span class="nf">textInput</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nb">key</span><span class="p">())</span><span class="o">-&gt;</span><span class="nf">setValue</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">defaultValue</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="cd">/**
     * Return the validation rules for the setting.
     *
     * The key to use for the rules is data. You may also override the validator method to customise the validator further
     *
     * @return array
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">rules</span><span class="p">():</span> <span class="kt">array</span><span class="o">|</span><span class="n">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">'string|min:2|max:20'</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="cd">/**
     * @return array
     */</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="n">group</span><span class="p">():</span> <span class="kt">array</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">'branding'</span><span class="p">,</span> <span class="s1">'appearance'</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>These classes should extend a setting type such as <code class="language-plaintext highlighter-rouge">Settings\Schema\UserSetting</code> or <code class="language-plaintext highlighter-rouge">Settings\Schema\GlobalSetting</code>. See more about creating a custom type at the end of this page.</p> <h3 id="customising-your-setting"> <a href="#customising-your-setting" class="anchor-heading" aria-labelledby="customising-your-setting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Customising your setting </h3> <h4 id="form-field"> <a href="#form-field" class="anchor-heading" aria-labelledby="form-field"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Form Field </h4> <p>Form fields are defined using the <a href="https://tobytwigger.github.io/form-schema-generator/">form schema generator</a>. You can define any field you need here, including complex fields that return objects.</p> <p>The input name for the field is defined in <code class="language-plaintext highlighter-rouge">$this-&gt;key()</code>, and the default value in <code class="language-plaintext highlighter-rouge">$this-&gt;defaultValue()</code> so to define a simple text field you’d use this plus a label/hint/other fields.</p> <p>When using anonymous settings, hardcode the key and value and just pass the result of the field generator directly to <code class="language-plaintext highlighter-rouge">::create</code>.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">function</span> <span class="n">fieldOptions</span><span class="p">():</span> <span class="err">\</span><span class="nc">FormSchema\Schema\Field</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="err">\</span><span class="nc">FormSchema\Generator\Field</span><span class="o">::</span><span class="nf">textInput</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nb">key</span><span class="p">())</span><span class="o">-&gt;</span><span class="nf">setValue</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">defaultValue</span><span class="p">());</span>
    <span class="p">}</span>

</code></pre></div></div> <p>Fields are currently a required property of any setting, to allow you to dynamically create setting pages. You can learn more about how to integrate your frontend with the form schema in the <a href="integrating.md">integrate documentation</a>.</p> <h4 id="validation"> <a href="#validation" class="anchor-heading" aria-labelledby="validation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Validation </h4> <p>To ensure the settings entered into the database are valid, you can define rules in the <code class="language-plaintext highlighter-rouge">rules</code> array. This can be an array or string of rules, that will validate a valid value. There’s no need to put <code class="language-plaintext highlighter-rouge">required</code>/<code class="language-plaintext highlighter-rouge">optional</code> rules in, but do include <code class="language-plaintext highlighter-rouge">nullable</code> if the option can be null.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">function</span> <span class="n">rules</span><span class="p">():</span> <span class="kt">array</span><span class="o">|</span><span class="n">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">'string|min:2|max:20'</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div></div> <h4 id="groups"> <a href="#groups" class="anchor-heading" aria-labelledby="groups"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Groups </h4> <p>Groups are a way to order settings to the user. By grouping together similar settings (such as those related to the site theme, authentication, emails etc), it helps users quickly find what they’re looking for.</p> <p>To define a group, define a <code class="language-plaintext highlighter-rouge">group</code> function. This should return an array of groups the setting is in. When retrieving a form schema to represent settings, the first group will be taken as the group, and therefore the first group should be the ‘main’ group.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">function</span> <span class="n">group</span><span class="p">():</span> <span class="kt">array</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">'branding'</span><span class="p">,</span> <span class="s1">'appearance'</span><span class="p">];</span>
    <span class="p">}</span>
</code></pre></div></div> <p>See the integrate section for information about how to add metadata to these.</p> <h4 id="encryption"> <a href="#encryption" class="anchor-heading" aria-labelledby="encryption"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Encryption </h4> <p>The value of all settings are encrypted automatically, since it adds very little overhead. If the data in the setting is not sensitive and you’d rather not encrypt it, set a public <code class="language-plaintext highlighter-rouge">$shouldEncrypt</code> property to false in your setting.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">protected</span> <span class="kt">boolean</span> <span class="nv">$shouldEncrypt</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</code></pre></div></div> <p>You can also make the default behaviour be that encryption is not automatic, but can be turned on with <code class="language-plaintext highlighter-rouge">$shouldEncrypt = true</code>. To do this, set <code class="language-plaintext highlighter-rouge">encryption</code> to <code class="language-plaintext highlighter-rouge">false</code> in the config file. Anonymous settings use this default behaviour to determine if settings should be encrypted.</p> <h4 id="complex-data-types"> <a href="#complex-data-types" class="anchor-heading" aria-labelledby="complex-data-types"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Complex data types </h4> <p>All values in the database are automatically serialised to preserve type. This means that arrays and objects will all be saved and retrieved in the correct format, so you don’t have to worry about how your setting is saved.</p> <p>If you want to control how the setting is saved in the database, implement the <code class="language-plaintext highlighter-rouge">\Settings\Contract\CastsSettingValue</code> interface on your setting. You will need to define a <code class="language-plaintext highlighter-rouge">castToString</code> and <code class="language-plaintext highlighter-rouge">castToValue</code> functions on the setting which will convert your validated setting value to a database-friendly string and back.</p> <p>This example would handle a complex data object, such as something returned from an API client.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">function</span> <span class="n">castToString</span><span class="p">(</span><span class="err">\</span><span class="nc">My\Api\Result</span> <span class="nv">$value</span><span class="p">)</span><span class="o">:</span> <span class="n">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nb">json_encode</span><span class="p">([</span>
            <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="o">-&gt;</span><span class="nf">getId</span><span class="p">(),</span>
            <span class="s1">'result'</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="o">-&gt;</span><span class="nf">getResult</span><span class="p">()</span>
        <span class="p">]);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">castToValue</span><span class="p">(</span><span class="kt">string</span> <span class="nv">$value</span><span class="p">):</span> <span class="err">\</span><span class="nc">My\Api\Result</span>
    <span class="p">{</span>
        <span class="nv">$value</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        
        <span class="k">return</span> <span class="k">new</span> <span class="err">\</span><span class="nf">My\Api\Result</span><span class="p">(</span><span class="nv">$value</span><span class="p">[</span><span class="s1">'id'</span><span class="p">])</span>
            <span class="o">-&gt;</span><span class="nf">getResult</span><span class="p">(</span><span class="nv">$value</span><span class="p">[</span><span class="s1">'result'</span><span class="p">]);</span>
    <span class="p">}</span>
</code></pre></div></div> <h2 id="registering"> <a href="#registering" class="anchor-heading" aria-labelledby="registering"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Registering </h2> <p>You can then register settings in the <code class="language-plaintext highlighter-rouge">boot</code> function of a service provider using the facade, or replace <code class="language-plaintext highlighter-rouge">\Settings\Setting::</code> with <code class="language-plaintext highlighter-rouge">settings()-&gt;</code> to use the helper function.</p> <p>You can also register information about groups, which will be automatically pulled into any form schemas you extract from settings.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">function</span> <span class="n">boot</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="err">\</span><span class="nc">Settings\Setting</span><span class="o">::</span><span class="nf">register</span><span class="p">(</span><span class="k">new</span> <span class="err">\</span><span class="nf">Acme\Setting\SiteName</span><span class="p">());</span>
        <span class="err">\</span><span class="nc">Settings\Setting</span><span class="o">::</span><span class="nf">register</span><span class="p">([</span>
            <span class="c1">// Create a new class instance manually</span>
            <span class="k">new</span> <span class="err">\</span><span class="nf">Acme\Setting\SiteName</span><span class="p">(),</span>
            
             <span class="c1">// Letting the service container build the setting means you can inject dependencies into the setting construct.</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">app</span><span class="o">-&gt;</span><span class="nf">make</span><span class="p">(</span><span class="err">\</span><span class="nc">Acme\Setting\SiteTheme</span><span class="o">::</span><span class="n">class</span><span class="p">)</span>
        <span class="p">]);</span>
        
        <span class="err">\</span><span class="nc">Settings\Setting</span><span class="o">::</span><span class="nf">register</span><span class="p">(</span><span class="k">new</span> <span class="err">\</span><span class="nf">Acme\Setting\SiteName</span><span class="p">(),</span> <span class="p">[</span><span class="s1">'extra'</span><span class="p">,</span> <span class="s1">'groups'</span><span class="p">,</span> <span class="s1">'for'</span><span class="p">,</span> <span class="s1">'the'</span><span class="p">,</span> <span class="s1">'setting'</span><span class="p">]);</span>
        
        <span class="err">\</span><span class="nc">Settings\Setting</span><span class="o">::</span><span class="nf">registerGroup</span><span class="p">(</span>
            <span class="s1">'branding'</span><span class="p">,</span> <span class="c1">// Group Key</span>
            <span class="s1">'Branding'</span><span class="p">,</span> <span class="c1">// Title for the group</span>
            <span class="s1">'Settings related to the site brand'</span> <span class="c1">// Description for the group</span>
        <span class="p">);</span>
    <span class="p">}</span>
</code></pre></div></div> <p>Anonymous settings are automatically registered for you when using <code class="language-plaintext highlighter-rouge">create::</code>, <code class="language-plaintext highlighter-rouge">createUser::</code> or <code class="language-plaintext highlighter-rouge">createGlobal::</code>. If you want to just create a setting rather than register one, you can use the factory directly.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$setting</span> <span class="o">=</span> <span class="err">\</span><span class="nc">Settings\Anonymous\AnonymousSettingFactory</span><span class="o">::</span><span class="nf">make</span><span class="p">(</span><span class="n">string</span> <span class="nv">$type</span><span class="p">,</span> <span class="n">string</span> <span class="nv">$key</span><span class="p">,</span> <span class="n">mixed</span> <span class="nv">$defaultValue</span><span class="p">,</span> <span class="nc">Field</span> <span class="nv">$fieldOptions</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$groups</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'default'</span><span class="p">],</span> <span class="k">array</span><span class="o">|</span><span class="n">string</span> <span class="nv">$rules</span> <span class="o">=</span> <span class="p">[],</span> <span class="o">?</span><span class="err">\</span><span class="nc">Closure</span> <span class="nv">$resolveIdUsing</span> <span class="o">=</span> <span class="kc">null</span><span class="p">);</span>
<span class="err">\</span><span class="nc">Setting\Setting</span><span class="o">::</span><span class="nf">register</span><span class="p">(</span><span class="nv">$setting</span><span class="p">);</span>
</code></pre></div></div> <p>You can also register settings and groups in the config. You need to make sure these settings can be resolved from the service container - if your setting doesn’t rely on any dependencies being passed in then you won’t need to worry about this.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="c1">// config/settings.php</span>

<span class="k">return</span> <span class="p">[</span>

    <span class="s1">'settings'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="err">\</span><span class="nc">Acme\Setting\SiteName</span><span class="o">::</span><span class="n">class</span><span class="p">,</span>
        <span class="err">\</span><span class="nc">Acme\Setting\SiteTheme</span><span class="o">::</span><span class="n">class</span><span class="p">,</span>
        <span class="p">[</span> <span class="c1">// An anonymous setting</span>
            <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'user'</span><span class="p">,</span> <span class="c1">// 'user', 'global', or a custom type</span>
            <span class="s1">'key'</span> <span class="o">=&gt;</span> <span class="s1">'timezone'</span><span class="p">,</span> <span class="c1">// The setting key</span>
            <span class="s1">'defaultValue'</span> <span class="o">=&gt;</span> <span class="s1">'Europe/London'</span><span class="p">,</span> <span class="c1">// The default value</span>
            <span class="c1">// The field. You must serialize this so your config can still be cached.</span>
            <span class="s1">'fieldOptions'</span> <span class="o">=&gt;</span> <span class="nb">serialize</span><span class="p">(</span><span class="err">\</span><span class="nc">FormSchema\Generator\Field</span><span class="o">::</span><span class="nf">textInput</span><span class="p">(</span><span class="s1">'timezone'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">setValue</span><span class="p">(</span><span class="s1">'Europe/London'</span><span class="p">)),</span>
            <span class="s1">'groups'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'language'</span><span class="p">,</span> <span class="s1">'content'</span><span class="p">],</span> <span class="c1">// Groups to put the setting in</span>
            <span class="s1">'rules'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'string|timezone'</span><span class="p">]</span> <span class="c1">// Laravel validation rules to check the setting value       </span>
        <span class="p">]</span>
    <span class="p">],</span>
    <span class="s1">'groups'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'branding'</span> <span class="p">[</span>
            <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'Branding'</span><span class="p">,</span>
            <span class="s1">'subtitle'</span> <span class="o">=&gt;</span> <span class="s1">'Settings related to the site brand'</span>
        <span class="p">],</span>
    <span class="p">]</span>
<span class="p">];</span>
</code></pre></div></div> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0"> Copyright &copy; 2020 Toby Twigger. Distributed by an <a href=\"https://github.com/tobytwigger/laravel-translate/blob/develop/LICENCE.md\">MIT license.</a> </p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/tobytwigger/laravel-settings/edit/develop/_docs/create-settings.md" id="edit-this-page">Edit this page on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script> const toggleDarkMode = document.querySelector('.js-toggle-dark-mode'); jtd.addEvent(toggleDarkMode, 'click', function(){ if (jtd.getTheme() === 'dark') { jtd.setTheme('light'); setCookie('theme', 'light', 365); toggleDarkMode.textContent = 'Come to the dark side'; } else { jtd.setTheme('dark'); setCookie('theme', 'dark', 365); toggleDarkMode.textContent = 'Return to the light side'; } }); jtd.onReady(function() { if(getCookie('theme') === 'dark') { jtd.setTheme('dark'); toggleDarkMode.textContent = 'Return to the light side'; } else { jtd.setTheme('light'); toggleDarkMode.textContent = 'Come to the dark side'; } }); function setCookie(cname, cvalue, exdays) { let d = new Date(); d.setTime(d.getTime() + (exdays*24*60*60*1000)); let expires = "expires="+ d.toUTCString(); document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/"; } function getCookie(cname) { let name = cname + "="; let decodedCookie = decodeURIComponent(document.cookie); let ca = decodedCookie.split(';'); for(let i = 0; i <ca.length; i++) { let c = ca[i]; while (c.charAt(0) == ' ') { c = c.substring(1); } if (c.indexOf(name) == 0) { return c.substring(name.length, c.length); } } return ""; } </script> </body> </html>
