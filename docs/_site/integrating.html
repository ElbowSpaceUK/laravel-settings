<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <meta name="google-site-verification" content="4SG_2KfCa2XVgO0fu6cjWwpp63M1in1SLQUBAXW0d3I" /> <title>Integrate - Laravel Settings</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-8FNXG696PB"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-8FNXG696PB', { 'anonymize_ip': true }); </script> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Integrate | Laravel Settings</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Integrate" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Basic Usage" /> <meta property="og:description" content="Basic Usage" /> <meta property="og:site_name" content="Laravel Settings" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Integrate" /> <script type="application/ld+json"> {"description":"Basic Usage","@type":"WebPage","url":"/integrating","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/images/logo.png"}},"headline":"Integrate","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/index" class="nav-list-link">Introduction</a></li><li class="nav-list-item"><a href="/create-settings" class="nav-list-link">Creating Settings</a></li><li class="nav-list-item"><a href="/get-settings" class="nav-list-link">Get Settings</a></li><li class="nav-list-item"><a href="/set-settings" class="nav-list-link">Set Settings</a></li><li class="nav-list-item active"><a href="/integrating" class="nav-list-link active">Integrate</a></li><li class="nav-list-item"><a href="/js" class="nav-list-link">JS</a></li></ul> </nav> <footer class="site-footer"> <p> <button type="button" class="btn btn-sm btn-block btn-purple js-toggle-dark-mode">Come to the dark side</button> </p> <p> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </p> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Laravel Settings" aria-label="Search Laravel Settings" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/tobytwigger/laravel-settings" class="site-button" > Laravel Settings on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="basic-usage"> <a href="#basic-usage" class="anchor-heading" aria-labelledby="basic-usage"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Basic Usage </h1> <details open=""> <summary class="text-delta"> Table of contents </summary> <ol id="markdown-toc"> <li><a href="#api" id="markdown-toc-api">API</a> <ol> <li><a href="#get-a-setting-value" id="markdown-toc-get-a-setting-value">Get a setting value</a> <ol> <li><a href="#request" id="markdown-toc-request">Request</a></li> <li><a href="#response" id="markdown-toc-response">Response</a></li> </ol> </li> <li><a href="#set-a-setting-values" id="markdown-toc-set-a-setting-values">Set a setting value(s)</a> <ol> <li><a href="#request-1" id="markdown-toc-request-1">Request</a></li> <li><a href="#response-1" id="markdown-toc-response-1">Response</a></li> </ol> </li> <li><a href="#get-all-setting-values" id="markdown-toc-get-all-setting-values">Get all setting values</a> <ol> <li><a href="#request-2" id="markdown-toc-request-2">Request</a></li> <li><a href="#response-2" id="markdown-toc-response-2">Response</a></li> </ol> </li> </ol> </li> <li><a href="#validation" id="markdown-toc-validation">Validation</a></li> <li><a href="#creating-a-settings-page" id="markdown-toc-creating-a-settings-page">Creating a settings page</a></li> <li><a href="#transition-from-keys-to-class-based" id="markdown-toc-transition-from-keys-to-class-based">Transition from keys to class based</a> <ol> <li><a href="#removing-the-anonymous-setting" id="markdown-toc-removing-the-anonymous-setting">Removing the anonymous setting</a></li> </ol> </li> <li><a href="#using-settings-in-service-providers" id="markdown-toc-using-settings-in-service-providers">Using settings in service providers</a></li> </ol> </details><hr /> <p class="label label-red">7</p> <p>This page currently documents features that haven’t yet been created.</p> <h2 id="api"> <a href="#api" class="anchor-heading" aria-labelledby="api"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> API </h2> <p>This package comes with an API for updating the settings.</p> <h3 id="get-a-setting-value"> <a href="#get-a-setting-value" class="anchor-heading" aria-labelledby="get-a-setting-value"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Get a setting value </h3> <h4 id="request"> <a href="#request" class="anchor-heading" aria-labelledby="request"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Request </h4> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">GET</span> <span class="nn">/_setting/{key}</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
</code></pre></div></div> <h4 id="response"> <a href="#response" class="anchor-heading" aria-labelledby="response"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Response </h4> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">{</span>
<span class="s">   "setting": {</span>
<span class="s">        key: '',</span>
<span class="s">        value: '',</span>
<span class="s">        updated_at: ''</span>
<span class="s">    }</span>
<span class="s">}</span>
</code></pre></div></div> <h3 id="set-a-setting-values"> <a href="#set-a-setting-values" class="anchor-heading" aria-labelledby="set-a-setting-values"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Set a setting value(s) </h3> <p><strong>POST</strong> /setting [ {“value”: “setting-value”} ]</p> <h4 id="request-1"> <a href="#request-1" class="anchor-heading" aria-labelledby="request-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Request </h4> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">POST</span> <span class="nn">/_setting</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">{</span>
<span class="s">    "settings": {</span>
<span class="s">        "key1": "First setting",</span>
<span class="s">        "key2": "Second setting"</span>
<span class="s">    ]</span>
<span class="s">}</span>
</code></pre></div></div> <h4 id="response-1"> <a href="#response-1" class="anchor-heading" aria-labelledby="response-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Response </h4> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
</code></pre></div></div> <h3 id="get-all-setting-values"> <a href="#get-all-setting-values" class="anchor-heading" aria-labelledby="get-all-setting-values"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Get all setting values </h3> <h4 id="request-2"> <a href="#request-2" class="anchor-heading" aria-labelledby="request-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Request </h4> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">GET</span> <span class="nn">/_setting</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
</code></pre></div></div> <h4 id="response-2"> <a href="#response-2" class="anchor-heading" aria-labelledby="response-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Response </h4> <div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">{</span>
<span class="s">   "settings": [</span>
<span class="s">        {</span>
<span class="s">            key: '',</span>
<span class="s">            value: '',</span>
<span class="s">            updated_at: ''</span>
<span class="s">        },</span>
<span class="s">        {...},</span>
<span class="s">    ]</span>
<span class="s">}</span>
</code></pre></div></div> <h2 id="validation"> <a href="#validation" class="anchor-heading" aria-labelledby="validation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Validation </h2> <p>If you use your own API to update settings, or a standard web request, you can use the following validation rule to check all the given settings are valid according to their validation rules</p> <ul> <li><code class="language-plaintext highlighter-rouge">settings</code> - the given attribute must be an array of settings as key value pairs</li> </ul> <h2 id="creating-a-settings-page"> <a href="#creating-a-settings-page" class="anchor-heading" aria-labelledby="creating-a-settings-page"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a settings page </h2> <p>We’ve previously covered getting a Form instance from settings/groups of settings. Pass this schema to the frontend and render it using a dynamic form generator. Each setting group will appear in a different form group.</p> <p>Integrating with Form schema generator</p> <h2 id="transition-from-keys-to-class-based"> <a href="#transition-from-keys-to-class-based" class="anchor-heading" aria-labelledby="transition-from-keys-to-class-based"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Transition from keys to class based </h2> <p>You can alias the old string key to the new class based name</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="err">\</span><span class="nc">Settings\Setting</span><span class="o">::</span><span class="nf">alias</span><span class="p">(</span><span class="err">\</span><span class="nc">Acme\Settings\SiteName</span><span class="o">::</span><span class="n">class</span><span class="p">,</span> <span class="s1">'siteName'</span><span class="p">);</span>
</code></pre></div></div> <p>Now, when you call <code class="language-plaintext highlighter-rouge">\Acme\Settings\SiteName::getValue()</code>, the class will automatically be replaced with the alias. This means there should be no friction when changing over to class based settings, since both options are viable.</p> <h3 id="removing-the-anonymous-setting"> <a href="#removing-the-anonymous-setting" class="anchor-heading" aria-labelledby="removing-the-anonymous-setting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Removing the anonymous setting </h3> <p>How to then fully move over</p> <h2 id="using-settings-in-service-providers"> <a href="#using-settings-in-service-providers" class="anchor-heading" aria-labelledby="using-settings-in-service-providers"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using settings in service providers </h2> <p>It can be tempting to use a setting in your service provider, to store things like service credentials that are needed to set it up.</p> <p>However, the settings package isn’t ready to use until the application is fully booted, since it depends on things like cache, encryption and its own bindings to function. If you try to use it before the application is booted, you’ll get an exception.</p> <p>To work around this, so you can use settings to set up services needed by the rest of your app, you can use the <code class="language-plaintext highlighter-rouge">booted</code> callback on the application. In the <code class="language-plaintext highlighter-rouge">register</code> function of your service provider, define a callback which should be called after the application is booted. This will be called as soon as the application is booted, meaning you can do any service setup here and make use of the settings.</p> <p>The easier option is to register your bindings as a callback, which should only be called once the service is actually requested. But either option is equally fine and you can use whichever suits the situation best!</p> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0"> Copyright &copy; 2020 Toby Twigger. Distributed by an <a href=\"https://github.com/tobytwigger/laravel-translate/blob/develop/LICENCE.md\">MIT license.</a> </p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/tobytwigger/laravel-settings/edit/develop/_docs/integrating.md" id="edit-this-page">Edit this page on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script> const toggleDarkMode = document.querySelector('.js-toggle-dark-mode'); jtd.addEvent(toggleDarkMode, 'click', function(){ if (jtd.getTheme() === 'dark') { jtd.setTheme('light'); setCookie('theme', 'light', 365); toggleDarkMode.textContent = 'Come to the dark side'; } else { jtd.setTheme('dark'); setCookie('theme', 'dark', 365); toggleDarkMode.textContent = 'Return to the light side'; } }); jtd.onReady(function() { if(getCookie('theme') === 'dark') { jtd.setTheme('dark'); toggleDarkMode.textContent = 'Return to the light side'; } else { jtd.setTheme('light'); toggleDarkMode.textContent = 'Come to the dark side'; } }); function setCookie(cname, cvalue, exdays) { let d = new Date(); d.setTime(d.getTime() + (exdays*24*60*60*1000)); let expires = "expires="+ d.toUTCString(); document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/"; } function getCookie(cname) { let name = cname + "="; let decodedCookie = decodeURIComponent(document.cookie); let ca = decodedCookie.split(';'); for(let i = 0; i <ca.length; i++) { let c = ca[i]; while (c.charAt(0) == ' ') { c = c.substring(1); } if (c.indexOf(name) == 0) { return c.substring(name.length, c.length); } } return ""; } </script> </body> </html>
