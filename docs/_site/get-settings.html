<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <meta name="google-site-verification" content="4SG_2KfCa2XVgO0fu6cjWwpp63M1in1SLQUBAXW0d3I" /> <title>Get Settings - Laravel Settings</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-8FNXG696PB"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-8FNXG696PB', { 'anonymize_ip': true }); </script> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Get Settings | Laravel Settings</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Get Settings" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Get Settings" /> <meta property="og:description" content="Get Settings" /> <meta property="og:site_name" content="Laravel Settings" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Get Settings" /> <script type="application/ld+json"> {"description":"Get Settings","@type":"WebPage","url":"/get-settings","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/images/logo.png"}},"headline":"Get Settings","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/index" class="nav-list-link">Introduction</a></li><li class="nav-list-item"><a href="/create-settings" class="nav-list-link">Creating Settings</a></li><li class="nav-list-item active"><a href="/get-settings" class="nav-list-link active">Get Settings</a></li><li class="nav-list-item"><a href="/set-settings" class="nav-list-link">Set Settings</a></li><li class="nav-list-item"><a href="/integrating" class="nav-list-link">Integrate</a></li><li class="nav-list-item"><a href="/js" class="nav-list-link">JS</a></li></ul> </nav> <footer class="site-footer"> <p> <button type="button" class="btn btn-sm btn-block btn-purple js-toggle-dark-mode">Come to the dark side</button> </p> <p> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </p> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Laravel Settings" aria-label="Search Laravel Settings" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/tobytwigger/laravel-settings" class="site-button" > Laravel Settings on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="get-settings"> <a href="#get-settings" class="anchor-heading" aria-labelledby="get-settings"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Get Settings </h1> <details open=""> <summary class="text-delta"> Table of contents </summary> <ol id="markdown-toc"> <li><a href="#getting-a-setting-value" id="markdown-toc-getting-a-setting-value">Getting a setting value</a> <ol> <li><a href="#getting-values-for-types" id="markdown-toc-getting-values-for-types">Getting values for types</a></li> <li><a href="#aliases" id="markdown-toc-aliases">Aliases</a></li> </ol> </li> <li><a href="#getting-multiple-setting-information" id="markdown-toc-getting-multiple-setting-information">Getting multiple setting information</a></li> <li><a href="#multi-tenancy" id="markdown-toc-multi-tenancy">Multi-tenancy</a> <ol> <li><a href="#setting-the-tenant" id="markdown-toc-setting-the-tenant">Setting the tenant</a></li> </ol> </li> </ol> </details><hr /> <h2 id="getting-a-setting-value"> <a href="#getting-a-setting-value" class="anchor-heading" aria-labelledby="getting-a-setting-value"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Getting a setting value </h2> <p>The easiest way to get the value of a setting is by referencing the setting class directly, e.g. <code class="language-plaintext highlighter-rouge">\Acme\Setting\SiteName::getValue()</code>.</p> <p>You can also use</p> <ul> <li>The facade: <code class="language-plaintext highlighter-rouge">\Settings\Setting::getValue(\Acme\Setting\SiteName::class)</code></li> <li>The helper: <code class="language-plaintext highlighter-rouge">settings(\Settings\Setting::class)</code></li> </ul> <p>To access string-based settings with their key, you can replace the class name with the key</p> <ul> <li>The facade: <code class="language-plaintext highlighter-rouge">\Settings\Setting::getValue('siteName')</code></li> <li>The helper: <code class="language-plaintext highlighter-rouge">settings('siteName')</code></li> </ul> <h3 id="getting-values-for-types"> <a href="#getting-values-for-types" class="anchor-heading" aria-labelledby="getting-values-for-types"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Getting values for types </h3> <p>For setting types like users and teams, where the setting value depends on the session, you can use the same function. This will automatically resolve the current user/team/model from the session and use that. If you do pass an ID in as the first parameter though, it will get the setting value for the given model instead.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">\</span><span class="nc">Settings\Setting</span><span class="o">::</span><span class="nf">getValue</span><span class="p">(</span><span class="s1">'theme'</span><span class="p">)</span> <span class="c1">// Get the value for the current user, or the default if no-one is logged in</span>
<span class="err">\</span><span class="nc">Settings\Setting</span><span class="o">::</span><span class="nf">getValue</span><span class="p">(</span><span class="s1">'theme'</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c1">// Get the value for user #5, even if someone else is logged in</span>
</code></pre></div></div> <h3 id="aliases"> <a href="#aliases" class="anchor-heading" aria-labelledby="aliases"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Aliases </h3> <p>For common settings, you can alias the getters to a single function. Rather than using <code class="language-plaintext highlighter-rouge">\Settings\Setting::getValue(\Acme\Setting\SiteName::class)</code>, you can use <code class="language-plaintext highlighter-rouge">\Settings\Setting::getSiteName()</code>.</p> <p>By doing this you wonâ€™t get IDE typehinting, but it is a more concise way to refer to settings.</p> <p>To alias a setting like this, add it to the config file</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="k">return</span> <span class="p">[</span>
    <span class="s1">'aliases'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'siteName'</span> <span class="o">=&gt;</span> <span class="err">\</span><span class="nc">Acme\Setting\SiteName</span><span class="o">::</span><span class="n">class</span><span class="p">,</span>
        <span class="mf">...</span>
    <span class="p">]</span>
<span class="p">];</span>
</code></pre></div></div> <p>You can also add it directly in your service provider <code class="language-plaintext highlighter-rouge">boot</code> method</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">boot</span><span class="p">()</span>
<span class="p">{</span>
    <span class="err">\</span><span class="nc">SettingsSetting</span><span class="o">::</span><span class="nf">alias</span><span class="p">(</span><span class="s1">'siteName'</span><span class="p">,</span> <span class="err">\</span><span class="nc">Acme\Setting\SiteName</span><span class="o">::</span><span class="n">class</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <p>Aliasing in this way also makes your class-based settings accessible through the alias, so site name can now be accessed with <code class="language-plaintext highlighter-rouge">settings(\Acme\Setting\SiteName::class)</code> or `settings(â€˜siteNameâ€™).</p> <h2 id="getting-multiple-setting-information"> <a href="#getting-multiple-setting-information" class="anchor-heading" aria-labelledby="getting-multiple-setting-information"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Getting multiple setting information </h2> <p>To display the settings to users, you need to get information about the registered settings. These all use the setting service class, which you can access through the facade or the helper (passing it no parameters).</p> <p><strong>Groups</strong></p> <ul> <li>Get all settings with a given group: <code class="language-plaintext highlighter-rouge">\Settings\Setting::withGroup('group-name')-&gt;get()</code></li> <li>Get all settings with at least one of the given groups: <code class="language-plaintext highlighter-rouge">settings()-&gt;withAnyGroups(['group-name', 'group-name-2'])-&gt;get()</code></li> <li>Get all settings that have all the given groups: <code class="language-plaintext highlighter-rouge">settings()-&gt;withAllGroups(['group-name', 'group-name-2'])-&gt;get()</code></li> </ul> <p><strong>Types</strong></p> <ul> <li>Get all settings of a certain type: <code class="language-plaintext highlighter-rouge">settings()-&gt;withType(\Acme\Setting\TeamSettingType::class)-&gt;get()</code> or <code class="language-plaintext highlighter-rouge">settings()-&gt;withType('team')-&gt;get()</code>.</li> <li>Get all global settings: <code class="language-plaintext highlighter-rouge">settings()-&gt;withGlobal()-&gt;get()</code>. This is the same as calling <code class="language-plaintext highlighter-rouge">settings()-&gt;withType(\Settings\Schema\GlobalSetting::class)</code>.</li> <li>Get all user settings: <code class="language-plaintext highlighter-rouge">settings()-&gt;withUser()-&gt;get()</code>.</li> </ul> <p>The functions can be chained, so to get all global settings that belong to a group called â€˜Blog Moduleâ€™, youâ€™d use <code class="language-plaintext highlighter-rouge">\Settings\Setting::withGlobal()-&gt;withGroup('blog-module')-&gt;get()</code>.</p> <p>These will all return a <code class="language-plaintext highlighter-rouge">Settings\Support\SettingCollection</code> instance. You can use this like a normal Laravel collection, but you will also have access to the following functions.</p> <ul> <li><code class="language-plaintext highlighter-rouge">toForm()</code> - turn the settings into a <code class="language-plaintext highlighter-rouge">\FormSchema\Schema\Form</code>.</li> <li><code class="language-plaintext highlighter-rouge">toKeyValuePair()</code> - get all settings and their values as key value pairs.</li> </ul> <p>When using <code class="language-plaintext highlighter-rouge">toForm</code>, you can change how a collection casts settings to a form. Define a callback in the <code class="language-plaintext highlighter-rouge">register</code> function of your service provider, which accepts a collection of settings and returns a Form Schema instance.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">register</span><span class="p">()</span>
<span class="p">{</span>
    <span class="err">\</span><span class="nc">Settings\Collection\SettingCollection</span><span class="o">::</span><span class="nv">$convertToFormUsing</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="err">\</span><span class="nc">Settings\Collection\SettingCollection</span> <span class="nv">$settings</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="err">\</span><span class="nc">FormSchema\Generator\Form</span><span class="o">::</span><span class="nf">make</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">withGroup</span><span class="p">(</span><span class="o">&lt;...&gt;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">form</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="multi-tenancy"> <a href="#multi-tenancy" class="anchor-heading" aria-labelledby="multi-tenancy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Multi-tenancy </h2> <p>To support multi tenancy, you can set a tenant during the boot of your app. This will usually be an ID, but could be any unique string.</p> <p>When set, each tenant has their own settings and only their settings are queried.</p> <h3 id="setting-the-tenant"> <a href="#setting-the-tenant" class="anchor-heading" aria-labelledby="setting-the-tenant"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting the tenant </h3> <p>In the boot method of your service provider, you should add</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">\</span><span class="nc">Settings\Setting</span><span class="o">::</span><span class="nf">resolveTenantKeyUsing</span><span class="p">(</span><span class="k">function</span><span class="p">():</span> <span class="kt">?string</span> <span class="p">{</span>
    <span class="c1">// Get the tenant key</span>
<span class="p">});</span>
</code></pre></div></div> <p>In this closure, you can resolve the tenant from the route/session/anywhere else, and return a string unique to that tenant (such as their ID as a string, or some other unique key). If you return null, the default tenant will be used, which can be useful for public, non-tenanted parts of your site.</p> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0"> Copyright &copy; 2020 Toby Twigger. Distributed by an <a href=\"https://github.com/tobytwigger/laravel-translate/blob/develop/LICENCE.md\">MIT license.</a> </p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/tobytwigger/laravel-settings/edit/develop/_docs/get-settings.md" id="edit-this-page">Edit this page on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script> const toggleDarkMode = document.querySelector('.js-toggle-dark-mode'); jtd.addEvent(toggleDarkMode, 'click', function(){ if (jtd.getTheme() === 'dark') { jtd.setTheme('light'); setCookie('theme', 'light', 365); toggleDarkMode.textContent = 'Come to the dark side'; } else { jtd.setTheme('dark'); setCookie('theme', 'dark', 365); toggleDarkMode.textContent = 'Return to the light side'; } }); jtd.onReady(function() { if(getCookie('theme') === 'dark') { jtd.setTheme('dark'); toggleDarkMode.textContent = 'Return to the light side'; } else { jtd.setTheme('light'); toggleDarkMode.textContent = 'Come to the dark side'; } }); function setCookie(cname, cvalue, exdays) { let d = new Date(); d.setTime(d.getTime() + (exdays*24*60*60*1000)); let expires = "expires="+ d.toUTCString(); document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/"; } function getCookie(cname) { let name = cname + "="; let decodedCookie = decodeURIComponent(document.cookie); let ca = decodedCookie.split(';'); for(let i = 0; i <ca.length; i++) { let c = ca[i]; while (c.charAt(0) == ' ') { c = c.substring(1); } if (c.indexOf(name) == 0) { return c.substring(name.length, c.length); } } return ""; } </script> </body> </html>
