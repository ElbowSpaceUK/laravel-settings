<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <meta name="google-site-verification" content="4SG_2KfCa2XVgO0fu6cjWwpp63M1in1SLQUBAXW0d3I" /> <title>Setting Forms - Laravel Settings</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-8FNXG696PB"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-8FNXG696PB', { 'anonymize_ip': true }); </script> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Setting Forms | Laravel Settings</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Setting Forms" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Setting Forms" /> <meta property="og:description" content="Setting Forms" /> <link rel="canonical" href="http://localhost:4000/setting-forms" /> <meta property="og:url" content="http://localhost:4000/setting-forms" /> <meta property="og:site_name" content="Laravel Settings" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Setting Forms" /> <script type="application/ld+json"> {"description":"Setting Forms","url":"http://localhost:4000/setting-forms","@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/logo.png"}},"headline":"Setting Forms","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/index" class="nav-list-link">Introduction</a></li><li class="nav-list-item"><a href="http://localhost:4000/basic-usage" class="nav-list-link">Basic Usage</a></li><li class="nav-list-item"><a href="http://localhost:4000/class-based" class="nav-list-link">Class-based Settings</a></li><li class="nav-list-item"><a href="http://localhost:4000/advanced" class="nav-list-link">Advanced</a></li><li class="nav-list-item active"><a href="http://localhost:4000/setting-forms" class="nav-list-link active">Setting Forms</a></li><li class="nav-list-item"><a href="http://localhost:4000/integrating" class="nav-list-link">Integrate</a></li><li class="nav-list-item"><a href="http://localhost:4000/js" class="nav-list-link">JS</a></li></ul> </nav> <footer class="site-footer"> <p> <button type="button" class="btn btn-sm btn-block btn-purple js-toggle-dark-mode">Come to the dark side</button> </p> <p> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </p> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Laravel Settings" aria-label="Search Laravel Settings" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/ElbowSpaceUK/laravel-settings" class="site-button" > Laravel Settings on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 id="setting-forms"> <a href="#setting-forms" class="anchor-heading" aria-labelledby="setting-forms"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting Forms </h1> <details open="" class="no_toc"> <summary class="text-delta"> Table of contents </summary> <ol id="markdown-toc"> <li><a href="#setting-forms" id="markdown-toc-setting-forms">Setting Forms</a> <ol> <li><a href="#query-settings" id="markdown-toc-query-settings">Query settings</a></li> <li><a href="#create-a-form-instance" id="markdown-toc-create-a-form-instance">Create a form instance</a> <ol> <li><a href="#custom-form-creator" id="markdown-toc-custom-form-creator">Custom form creator</a></li> </ol> </li> <li><a href="#using-the-form" id="markdown-toc-using-the-form">Using the Form</a></li> </ol> </li> </ol> </details><hr /> <h2 id="query-settings"> <a href="#query-settings" class="anchor-heading" aria-labelledby="query-settings"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Query settings </h2> <p>To display the settings to users, you need to get information about the registered settings. These all use the setting service class, which you can access through the facade or the helper (passing it no parameters).</p> <p><strong>Groups</strong></p> <ul> <li>Get all settings with a given group: <code class="language-plaintext highlighter-rouge">\Settings\Setting::withGroup('group-name')-&gt;get()</code></li> <li>Get all settings with at least one of the given groups: <code class="language-plaintext highlighter-rouge">settings()-&gt;withAnyGroup(['group-name', 'group-name-2'])-&gt;get()</code></li> <li>Get all settings that have all the given groups: <code class="language-plaintext highlighter-rouge">settings()-&gt;withAllGroups(['group-name', 'group-name-2'])-&gt;get()</code></li> </ul> <p><strong>Types</strong></p> <ul> <li>Get all settings of a certain type: <code class="language-plaintext highlighter-rouge">settings()-&gt;withType(\Acme\Setting\TeamSettingType::class)-&gt;get()</code> or <code class="language-plaintext highlighter-rouge">settings()-&gt;withType('team')-&gt;get()</code>.</li> <li>Get all global settings: <code class="language-plaintext highlighter-rouge">settings()-&gt;withGlobal()-&gt;get()</code>. This is the same as calling <code class="language-plaintext highlighter-rouge">settings()-&gt;withType(\Settings\Schema\GlobalSetting::class)</code>.</li> <li>Get all user settings: <code class="language-plaintext highlighter-rouge">settings()-&gt;withUser()-&gt;get()</code>.</li> </ul> <p>The functions can be chained, so to get all global settings that belong to a group called ‘Blog Module’, you’d use <code class="language-plaintext highlighter-rouge">\Settings\Setting::withGlobal()-&gt;withGroup('blog-module')-&gt;get()</code>.</p> <h2 id="create-a-form-instance"> <a href="#create-a-form-instance" class="anchor-heading" aria-labelledby="create-a-form-instance"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create a form instance </h2> <p><code class="language-plaintext highlighter-rouge">get()</code> will always return a <code class="language-plaintext highlighter-rouge">Settings\Support\SettingCollection</code> instance. You can use this like a normal Laravel collection, but you will also have access to the following functions.</p> <ul> <li><code class="language-plaintext highlighter-rouge">toForm()</code> - turn the settings into a <code class="language-plaintext highlighter-rouge">\FormSchema\Schema\Form</code>.</li> <li><code class="language-plaintext highlighter-rouge">toKeyValuePair()</code> - get all settings and their values as key value pairs.</li> </ul> <h3 id="custom-form-creator"> <a href="#custom-form-creator" class="anchor-heading" aria-labelledby="custom-form-creator"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Custom form creator </h3> <p>When using <code class="language-plaintext highlighter-rouge">toForm</code>, you can change how a collection casts settings to a form. Define a callback in the <code class="language-plaintext highlighter-rouge">register</code> function of your service provider, which accepts a collection of settings and returns a Form Schema instance.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">register</span><span class="p">()</span>
<span class="p">{</span>
    <span class="err">\</span><span class="nc">Settings\Collection\SettingCollection</span><span class="o">::</span><span class="nv">$convertToFormUsing</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="err">\</span><span class="nc">Settings\Collection\SettingCollection</span> <span class="nv">$settings</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="err">\</span><span class="nc">FormSchema\Generator\Form</span><span class="o">::</span><span class="nf">make</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">withGroup</span><span class="p">(</span><span class="o">&lt;...&gt;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">form</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="using-the-form"> <a href="#using-the-form" class="anchor-heading" aria-labelledby="using-the-form"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the Form </h2> <p class="label label-yellow">This section is incomplete</p> <p>Pass this schema to the frontend and render it using a dynamic form generator. Each setting group will appear in a different form group.</p> <p>Integrating with Form schema generator</p> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0"> Copyright &copy; 2020 Toby Twigger. Distributed by an <a href=\"https://github.com/ElbowSpaceUK/laravel-translate/blob/develop/LICENCE.md\">MIT license.</a> </p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/ElbowSpaceUK/laravel-settings/edit/develop/_docs/setting-forms.md" id="edit-this-page">Edit this page on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script> const toggleDarkMode = document.querySelector('.js-toggle-dark-mode'); jtd.addEvent(toggleDarkMode, 'click', function(){ if (jtd.getTheme() === 'dark') { jtd.setTheme('light'); setCookie('theme', 'light', 365); toggleDarkMode.textContent = 'Come to the dark side'; } else { jtd.setTheme('dark'); setCookie('theme', 'dark', 365); toggleDarkMode.textContent = 'Return to the light side'; } }); jtd.onReady(function() { if(getCookie('theme') === 'dark') { jtd.setTheme('dark'); toggleDarkMode.textContent = 'Return to the light side'; } else { jtd.setTheme('light'); toggleDarkMode.textContent = 'Come to the dark side'; } }); function setCookie(cname, cvalue, exdays) { let d = new Date(); d.setTime(d.getTime() + (exdays*24*60*60*1000)); let expires = "expires="+ d.toUTCString(); document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/"; } function getCookie(cname) { let name = cname + "="; let decodedCookie = decodeURIComponent(document.cookie); let ca = decodedCookie.split(';'); for(let i = 0; i <ca.length; i++) { let c = ca[i]; while (c.charAt(0) == ' ') { c = c.substring(1); } if (c.indexOf(name) == 0) { return c.substring(name.length, c.length); } } return ""; } </script> </body> </html>
